<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Tools | ChartTools </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Tools | ChartTools ">
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/TheBoxyBear/charttools/blob/stable/Docs/articles/tools.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="ChartTools">
            ChartTools
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="tools">Tools</h1>

<p>ChartTools includes multiple utility methods for performing common operations on charts. This guide will cover such utilities.</p>
<p>Fun fact: The name ChartTools comes from the original purpose of the library of only providing utility methods for charts.</p>
<h2 id="accessing-utilities">Accessing utilities</h2>
<p>To start using utilities, add the <a href="../api/ChartTools.Tools.html">ChartTools.Tools</a> namespace to your usings. Once added, utilities can be called from their respective static class or as extension methods.</p>
<pre><code class="lang-csharp">using ChartTools.Tools;

AwesomeUtility.AwesomeUtility(song);
song.AwesomeUtility();
</code></pre>
<h2 id="merging-lengths">Merging lengths</h2>
<p>Some track objects define a length, such as special phrases and vocal phrases. <a href="../api/ChartTools.Tools.LengthMerger.html">LengthMerger</a> takes a set of such objects and sets the first object in the sequence to cover the entire duration from the start position of the earliest object to the end position of the last.</p>
<pre><code class="lang-csharp">// T is the type of objects in the collection.
T modified = LengthMerger.MergeLengths&lt;T&gt;(longTrackObjects);
</code></pre>
<p>The object to modify can be changed by providing it as a target.</p>
<pre><code class="lang-csharp">target = LengthMerger.MergeLengths&lt;T&gt;(longTrackObjects, target);
</code></pre>
<p>If a sequence has an object covering positions 10-20 and another covering 22-30, the resulting object will have a start position of 10 and end position of 30.</p>
<h2 id="cutting-lengths-and-sustains">Cutting lengths and sustains</h2>
<p>In some cases, tracks may be in a broken state where objects define lengths going part the start of the next matching objects. The Optimizer class provides methods for fixing such overlaps by cutting short lengths going past the start of certain objects. This process involves ordering the objects by position, the result of which is provided as a return value. If the objects are known to already be in order, the ordering can be skipped with an optional parameter.</p>
<h3 id="cutting-sustains">Cutting sustains</h3>
<pre><code class="lang-csharp">List&lt;StandardChord&gt; ordered = Optimizer.CutSustains&lt;StandardChord&gt;(guitarChords, &lt;skipOrdering&gt;);
</code></pre>
<p>Supports all chord types and simulates where sustains are forced to end due to another note of the same index or the presence of an open note and vice versa. Syllables are not modified, which may result in them falling outside the end position of the parent phrase. Part of the process of finding how to cut sustain involves ordering chords by position. The result of the ordering is provided as a return value.</p>
<h3 id="cutting-special-phrases">Cutting special phrases</h3>
<pre><code class="lang-csharp">List&lt;TrackSpecialPhrase&gt;[] orderedGroups = Optimizer.CutSpecialLenghts&lt;TrackSpecialPhrase&gt;(phrases, &lt;skipOrdering&gt;);
</code></pre>
<p>Groups phrases by special type before applying the cutting to each group individually. The grouping and ordering by position is provided as the return value, where each item in the array stores phrases of the same type.</p>
<blockquote>
<p><strong>NOTE</strong>: Due to the grouping being based on the numeric value of the special type, only collections of instruments and track special phrases are supported. Using an <code>IEnumerable&lt;SpecialPhrase&gt;</code> will result in an exception.</p>
</blockquote>
<h3 id="cutting-other-long-track-objects">Cutting other long track objects</h3>
<p>When the type of long objects is not known, a base method using the <a href="../api/ChartTools.ILongTrackObject.html">ILongTrackObject</a> interface can be used. This method only applies the base logic, treating each object equally compared to how note sustains and special phrase lengths which are grouped by their respective methods, returning the objects ordered by length.</p>
<pre><code class="lang-csharp">List&lt;ILongTrackObject&gt; oredredObjects = Optimizer.CutLenghts&lt;ILongTrackObject&gt;(objects, &lt;skipOrdering&gt;);
</code></pre>
<h2 id="removing-redundant-sync-track-markers">Removing redundant sync track markers</h2>
<p>The <a href="../api/ChartTools.Tools.Optimizer.html">Optimizer</a> class provides methods for removing tempo and time signature markers that have no effect on gameplay. Like with length cutting, the objects are ordered by position and provided as a return value. The ordering can also be skipped with an optional parameter.</p>
<pre><code class="lang-csharp">List&lt;TimeSignature&gt; orderedSignatures = Optimizer.RemoveUneeded(tempoMarkers, &lt;skipOrdering&gt;);
List&lt;Tempo&gt; orderedTempos = Optimizer.RemoveUneeded(timeSignatures, &lt;skipOrdering&gt;);
</code></pre>
<h3 id="anchored-tempos">Anchored tempos</h3>
<p>The method for removing tempo markers cannot work with anchored markers for which the tempo position is desynchronized and will throw an exception. An overload is provided which calculates the tick positions for such markers. This overload requires the temporal resolution obtained from the song's formatting. The optional parameter for skipping the ordering only applies to the ordering of synchronized markers.</p>
<pre><code class="lang-csharp">List&lt;Tempo&gt; orderedMarkers = Optimizer.RemoveUneeded(tempoMap, resolution, &lt;skipSyncedOrdering&gt;);
</code></pre>
<h2 id="tempo-rescaling">Tempo rescaling</h2>
<p>The <a href="../api/ChartTools.Tools.TempoRescaler.html">TempoRescaler</a> class provides scaling methods for various groups of track objects.</p>
<pre><code class="lang-csharp">TempoRescaler.Rescale(longObject, scale);
TempoRescaler.Rescale(trackObject, scale);
TempoRescaler.Rescale(longTrackObject, scale)
TempoRescaler.Rescale(tempo, scale);
TempoRescaler.Rescale(chord, scale);
TempoRescaler.Rescale(track, scale);
TempoRescaler.Rescale(instrument, scale);
TempoRescaler.Rescale(syncTrack, scale);
TempoRescaler.Rescale(song, scale);
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/TheBoxyBear/charttools/blob/stable/Docs/articles/tools.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
